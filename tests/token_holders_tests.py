import unittest
from token_holders import TokenHolders
from contract_methods import ContractMethods
from test_utils import TestElasticSearch
import json

class TokenHoldersTestCase(unittest.TestCase):
  def setUp(self):
    self.client = TestElasticSearch()
    self.client.recreate_index(TEST_INDEX)
    self.client.recreate_index(TEST_TX_INDEX)
    self.client.recreate_index(TEST_LISTED_INDEX)
    self.client.recreate_index(TEST_TOKEN_TX_INDEX)
    self.token_holders = TokenHolders({'contract': TEST_INDEX, 'transaction': TEST_TX_INDEX, 'listed_token': TEST_LISTED_INDEX, 'token_tx': TEST_TOKEN_TX_INDEX})
    self.contract_methods = ContractMethods({"contract": TEST_INDEX})
  
  def test_get_listed_tokens(self):
    for address in TEST_TOKEN_ADDRESSES:
      self.client.index(TEST_INDEX, 'contract', {'address': address}, refresh=True)
    self.contract_methods.search_methods()

    listed_tokens = self.token_holders._get_listed_tokens()
    listed_tokens = [token[0]['_source']['token_name'] for token in listed_tokens]
    listed_tokens = set(listed_tokens)
    self.assertCountEqual(['Aeternity', 'Populous Platform', 'Golem Network Token'], listed_tokens)
  
  def test_search_duplicates(self):
    for address in TEST_TOKEN_ADDRESSES:
      self.client.index(TEST_INDEX, 'contract', {'address': address}, refresh=True)
    for tx in TEST_TOKEN_TXS:
      self.client.index(TEST_TX_INDEX, 'tx', tx, refresh=True)
    self.contract_methods.search_methods()

    listed_tokens = self.token_holders._search_duplicates()
    duplicated = [token for token in listed_tokens if token['duplicated'] == True]
    real_golem = [token for token in duplicated if token['token_name'] == 'Golem Network Token'][0]
    real_aeternity = [token for token in duplicated if token['token_name'] == 'Aeternity'][0]
    assert real_golem['address'] == '0xa74476443119a942de498590fe1f2454d7d4ac0d'
    assert real_aeternity['address'] == '0x5ca9a71b1d01849c0a95490cc00559717fcf0d1d'
  
  def test_extract_token_txs(self):
    for tx in TEST_TOKEN_TXS:
      self.client.index(TEST_TX_INDEX, 'tx', tx, refresh=True)

    self.token_holders._extract_token_txs('0x5ca9a71b1d01849c0a95490cc00559717fcf0d1d')
    token_txs = self.token_holders._iterate_token_tx_descriptions('0x5ca9a71b1d01849c0a95490cc00559717fcf0d1d')
    token_txs = [tx for txs_list in token_txs for tx in txs_list]
    methods = [tx['_source']['method'] for tx in token_txs]
    amounts = [tx['_source']['value'] for tx in token_txs] 
    self.assertCountEqual(['transfer', 'approve', 'transferFrom'], methods)
    self.assertCountEqual(['356245680000000000000', '356245680000000000000', '2266000000000000000000'], amounts)
  
  def test_run(self):
    for i, address in enumerate(TEST_TOKEN_ADDRESSES):
      self.client.index(TEST_INDEX, 'contract', {'address': address, 'bytecode': TEST_BYTECODES[i]}, refresh=True)
    self.contract_methods.search_methods()

    self.token_holders._load_listed_tokens()
    self.token_holders.run(TEST_BLOCK)

    all_descrptions = self.token_holders._iterate_tx_descriptions()
    all_descrptions = [tx for txs_list in all_descrptions for tx in txs_list]
    token = list(set([descr['_source']['token'] for descr in all_descrptions]))[0]
    assert token == '0x5ca9a71b1d01849c0a95490cc00559717fcf0d1d'
    assert len(all_descrptions) == 2


TEST_INDEX = 'test-ethereum-contracts'
TEST_TX_INDEX = 'test-ethereum-txs'
TEST_LISTED_INDEX = 'test-listed-tokens'
TEST_TOKEN_TX_INDEX = 'test-token-txs'

TEST_TOKEN_ADDRESSES = ['0x5ca9a71b1d01849c0a95490cc00559717fcf0d1d',
  '0xd4fa1460f537bb9085d22c7bccb5dd450ef28e3a',
  '0x51ada638582e51c931147c9abd2a6d63bc02e337',
  '0xa74476443119a942de498590fe1f2454d7d4ac0d',
  '0xbe78d802c2aeebdc34c810b805c2691885a61257',
  '0x83199a2bd905dd5f2f61828e5a705790b782cf43'
  ]
TEST_BYTECODES = ['0x606060405260408051908101604052600481527f48302e31000000000000000000000000000000000000000000000000000000006020820152600690805161004b929160200190610156565b5060078054600160a860020a03191661010033600160a060020a031602179055341561007657600080fd5b5b6000806040805190810160405280600981526020017f41657465726e6974790000000000000000000000000000000000000000000000815250601260408051908101604052600281527f414500000000000000000000000000000000000000000000000000000000000060208201525b600160a060020a03331660009081526001602052604081208590558490556003838051610118929160200190610156565b506004805460ff191660ff8416179055600581805161013b929160200190610156565b505b505050426303c267000160085550600290505b506101f6565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f1061019757805160ff19168380011785556101c4565b828001600101855582156101c4579182015b828111156101c45782518255916020019190600101906101a9565b5b506101d19291506101d5565b5090565b6101f391905b808211156101d157600081556001016101db565b5090565b90565b610d8180620002066000396000f300606060405236156100ca5763ffffffff60e060020a60003504166301339c2181146100dd57806302d05d3f146100f257806306fdde0314610121578063095ea7b3146101ac57806318160ddd146101e257806323b872dd14610207578063313ce5671461024357806354fd4d501461026c57806370a08231146102f757806373d08bc51461032857806395d89b41146103b9578063a9059cbb14610444578063cae9ca511461047a578063d9a6cf81146104f3578063dd62ed3e14610518578063e77a912f1461054f575b34156100d557600080fd5b5b600080fd5b005b34156100e857600080fd5b6100db610576565b005b34156100fd57600080fd5b6101056105b5565b604051600160a060020a03909116815260200160405180910390f35b341561012c57600080fd5b6101346105c9565b60405160208082528190810183818151815260200191508051906020019080838360005b838110156101715780820151818401525b602001610158565b50505050905090810190601f16801561019e5780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b34156101b757600080fd5b6101ce600160a060020a0360043516602435610667565b604051901515815260200160405180910390f35b34156101ed57600080fd5b6101f561068b565b60405190815260200160405180910390f35b341561021257600080fd5b6101ce600160a060020a0360043581169060243516604435610691565b604051901515815260200160405180910390f35b341561024e57600080fd5b6102566106b6565b60405160ff909116815260200160405180910390f35b341561027757600080fd5b6101346106bf565b60405160208082528190810183818151815260200191508051906020019080838360005b838110156101715780820151818401525b602001610158565b50505050905090810190601f16801561019e5780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b341561030257600080fd5b6101f5600160a060020a036004351661075d565b60405190815260200160405180910390f35b341561033357600080fd5b6100db60046024813581810190830135806020818102016040519081016040528093929190818152602001838360200280828437820191505050505050919080359060200190820180359060200190808060200260200160405190810160405280939291908181526020018383602002808284375094965061077c95505050505050565b005b34156103c457600080fd5b610134610878565b60405160208082528190810183818151815260200191508051906020019080838360005b838110156101715780820151818401525b602001610158565b50505050905090810190601f16801561019e5780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b341561044f57600080fd5b6101ce600160a060020a0360043516602435610916565b604051901515815260200160405180910390f35b341561048557600080fd5b6101ce60048035600160a060020a03169060248035919060649060443590810190830135806020601f8201819004810201604051908101604052818152929190602084018383808284375094965061093995505050505050565b604051901515815260200160405180910390f35b34156104fe57600080fd5b6101f5610abd565b60405190815260200160405180910390f35b341561052357600080fd5b6101f5600160a060020a0360043581169060243516610ac3565b60405190815260200160405180910390f35b341561055a57600080fd5b6101ce610af0565b604051901515815260200160405180910390f35b60075460ff161561058357fe5b60075433600160a060020a0390811661010090920416146105a357600080fd5b6007805460ff191660011790555b5b5b565b6007546101009004600160a060020a031681565b60038054600181600116156101000203166002900480601f01602080910402602001604051908101604052809291908181526020018280546001816001161561010002031660029004801561065f5780601f106106345761010080835404028352916020019161065f565b820191906000526020600020905b81548152906001019060200180831161064257829003601f168201915b505050505081565b60075460009060ff16151561067857fe5b6106828383610af9565b90505b92915050565b60005481565b6008546000904211156106a057fe5b6106ab848484610b54565b90505b5b9392505050565b60045460ff1681565b60068054600181600116156101000203166002900480601f01602080910402602001604051908101604052809291908181526020018280546001816001161561010002031660029004801561065f5780601f106106345761010080835404028352916020019161065f565b820191906000526020600020905b81548152906001019060200180831161064257829003601f168201915b505050505081565b600160a060020a0381166000908152600160205260409020545b919050565b60075460009081908190819060ff161561079257fe5b60075433600160a060020a0390811661010090920416146107b257600080fd5b6000549350600092505b8551831015610868578583815181106107d157fe5b9060200190602002015191508483815181106107e957fe5b90602001906020020151600160a060020a038316600090815260016020526040902054909150811461085c57600160a060020a038216600081815260016020526040808220805490859055909603830195600080516020610d168339815191529084905190815260200160405180910390a35b5b6001909201916107bc565b60008490555b5b5b505050505050565b60058054600181600116156101000203166002900480601f01602080910402602001604051908101604052809291908181526020018280546001816001161561010002031660029004801561065f5780601f106106345761010080835404028352916020019161065f565b820191906000526020600020905b81548152906001019060200180831161064257829003601f168201915b505050505081565b60085460009042111561092557fe5b6106828383610b7a565b90505b5b92915050565b600160a060020a0333811660008181526002602090815260408083209488168084529490915280822086905590929190600080516020610d368339815191529086905190815260200160405180910390a383600160a060020a03166040517f72656365697665417070726f76616c28616464726573732c75696e743235362c8152609060020a6d616464726573732c627974657329026020820152602e01604051809103902060e060020a9004338530866040518563ffffffff1660e060020a0281526004018085600160a060020a0316600160a060020a0316815260200184815260200183600160a060020a0316600160a060020a03168152602001828051906020019080838360005b83811015610a5d5780820151818401525b602001610a44565b50505050905090810190601f168015610a8a5780820380516001836020036101000a031916815260200191505b5094505050505060006040518083038160008761646e5a03f1925050501515610ab257600080fd5b5060015b9392505050565b60085481565b600160a060020a038083166000908152600260209081526040808320938516835292905220545b92915050565b60075460ff1681565b600160a060020a0333811660008181526002602090815260408083209487168084529490915280822085905590929190600080516020610d368339815191529085905190815260200160405180910390a35060015b92915050565b60075460009060ff161515610b6557fe5b6106ab848484610b9e565b90505b9392505050565b60075460009060ff161515610b8b57fe5b6106828383610c83565b90505b92915050565b600160a060020a038316600090815260016020526040812054829010801590610bee5750600160a060020a0380851660009081526002602090815260408083203390941683529290522054829010155b8015610bfb575060008210155b1515610c0657600080fd5b600160a060020a0380841660008181526001602090815260408083208054880190558885168084528184208054899003905560028352818420339096168452949091529081902080548690039055909190600080516020610d168339815191529085905190815260200160405180910390a35060015b9392505050565b600160a060020a033316600090815260016020526040812054829010801590610cad575060008210155b1515610cb857600080fd5b600160a060020a03338116600081815260016020526040808220805487900390559286168082529083902080548601905591600080516020610d168339815191529085905190815260200160405180910390a35060015b929150505600ddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b925a165627a7a723058205ebd14f97c410ac1edf4f45aa6b5c02b7b09942cbf3f0c650001c1ec54b17b100029',
  "0x60606040526004805460a060020a60ff02191690556006805460ff1916905534620000005760405162001a6338038062001a6383398101604090815281516020830151918301516060840151608085015192850194939093019290915b84848484845b335b5b60038054600160a060020a03191633600160a060020a03161790555b60088054600160a060020a031916600160a060020a0383161790555b5060038054600160a060020a03191633600160a060020a03161790558451600b8054600082905290917f0175b7a638427703f0dbe7bb9bbf987a2551717b34e79f33b5b1008d1fa01db9602060026101006001861615026000190190941693909304601f9081018490048201938a01908390106200012757805160ff191683800117855562000157565b8280016001018555821562000157579182015b82811115620001575782518255916020019190600101906200013a565b5b506200017b9291505b8082111562000177576000815560010162000161565b5090565b505083600c9080519060200190828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f10620001cb57805160ff1916838001178555620001fb565b82800160010185558215620001fb579182015b82811115620001fb578251825591602001919060010190620001de565b5b506200021f9291505b8082111562000177576000815560010162000161565b5090565b50506000838155600d839055600354600160a060020a03168152600160205260408120849055831115620002995760035460005460408051600160a060020a039093168352602083019190915280517f30385c845b448a36257a6a1716e6ad2e1bc2cbe333cde1e69fe849ad6511adfe9281900390910190a15b801515620002be576006805460ff191660011790556000541515620002be5762000000565b5b5b50505050505b50505050505b61178780620002dc6000396000f300606060405236156101855763ffffffff60e060020a60003504166302f652a3811461018a57806305d2035b146101aa57806306fdde03146101cb578063095ea7b31461025857806318160ddd1461028857806323b872dd146102a757806329ff4f53146102dd578063313ce567146102f857806340c10f191461031757806342966c681461033557806342c1867b14610347578063432146751461037457806345977d03146103945780634eee966f146103a65780635de4ccb0146104385780635f412d4f14610461578063600440cb1461047057806370a08231146104995780638444b391146104c4578063867c2857146104f25780638da5cb5b1461051f57806395d89b411461054857806396132521146105d55780639738968c146105f6578063a9059cbb14610617578063c752ff6214610647578063d1f276d314610666578063d7e7088a1461068f578063dd62ed3e146106aa578063eefa597b146106db578063f2fde38b146106fc578063fccc281314610717578063ffeb7d7514610740575b610000565b34610000576101a8600160a060020a0360043516602435151561075b565b005b34610000576101b76107bc565b604080519115158252519081900360200190f35b34610000576101d86107c5565b60408051602080825283518183015283519192839290830191850190808383821561021e575b80518252602083111561021e57601f1990920191602091820191016101fe565b505050905090810190601f16801561024a5780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b34610000576101b7600160a060020a0360043516602435610853565b604080519115158252519081900360200190f35b34610000576102956108f9565b60408051918252519081900360200190f35b34610000576101b7600160a060020a03600435811690602435166044356108ff565b604080519115158252519081900360200190f35b34610000576101a8600160a060020a0360043516610956565b005b34610000576102956109ad565b60408051918252519081900360200190f35b34610000576101a8600160a060020a03600435166024356109b3565b005b34610000576101a8600435610b50565b005b34610000576101b7600160a060020a0360043516610be7565b604080519115158252519081900360200190f35b34610000576101a8600160a060020a03600435166024351515610bfc565b005b34610000576101a8600435610c8e565b005b34610000576101a8600480803590602001908201803590602001908080601f0160208091040260200160405190810160405280939291908181526020018383808284375050604080516020601f89358b01803591820183900483028401830190945280835297999881019791965091820194509250829150840183828082843750949650610ded95505050505050565b005b3461000057610445611070565b60408051600160a060020a039092168252519081900360200190f35b34610000576101a861107f565b005b34610000576104456110b3565b60408051600160a060020a039092168252519081900360200190f35b3461000057610295600160a060020a03600435166110c2565b60408051918252519081900360200190f35b34610000576104d16110e1565b6040518082600481116100005760ff16815260200191505060405180910390f35b34610000576101b7600160a060020a036004351661112e565b604080519115158252519081900360200190f35b3461000057610445611143565b60408051600160a060020a039092168252519081900360200190f35b34610000576101d8611152565b60408051602080825283518183015283519192839290830191850190808383821561021e575b80518252602083111561021e57601f1990920191602091820191016101fe565b505050905090810190601f16801561024a5780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b34610000576101b76111e0565b604080519115158252519081900360200190f35b34610000576101b76111f0565b604080519115158252519081900360200190f35b34610000576101b7600160a060020a0360043516602435611216565b604080519115158252519081900360200190f35b346100005761029561126b565b60408051918252519081900360200190f35b3461000057610445611271565b60408051600160a060020a039092168252519081900360200190f35b34610000576101a8600160a060020a0360043516611280565b005b3461000057610295600160a060020a0360043581169060243516611438565b60408051918252519081900360200190f35b34610000576101b7611465565b604080519115158252519081900360200190f35b34610000576101a8600160a060020a036004351661146b565b005b34610000576104456114b6565b60408051600160a060020a039092168252519081900360200190f35b34610000576101a8600160a060020a03600435166114bb565b005b60035433600160a060020a0390811691161461077657610000565b60045460009060a060020a900460ff161561079057610000565b600160a060020a0383166000908152600560205260409020805460ff19168315151790555b5b505b5050565b60065460ff1681565b600b805460408051602060026001851615610100026000190190941693909304601f8101849004840282018401909252818152929183018282801561084b5780601f106108205761010080835404028352916020019161084b565b820191906000526020600020905b81548152906001019060200180831161082e57829003601f168201915b505050505081565b600081158015906108885750600160a060020a0333811660009081526002602090815260408083209387168352929052205415155b1561089257610000565b600160a060020a03338116600081815260026020908152604080832094881680845294825291829020869055815186815291517f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b9259281900390910190a35060015b92915050565b60005481565b600454600090849060a060020a900460ff16151561093e57600160a060020a03811660009081526005602052604090205460ff16151561093e57610000565b5b61094a85858561150a565b91505b5b509392505050565b60035433600160a060020a0390811691161461097157610000565b60045460009060a060020a900460ff161561098b57610000565b60048054600160a060020a031916600160a060020a0384161790555b5b505b50565b600d5481565b600160a060020a03331660009081526007602052604090205460ff1615156109da57610000565b60065460ff16156109ea57610000565b60005473c2dc70143ab4862bfa16432d8bb469f7fbdd5b4a6366098d4f9091836000604051602001526040518363ffffffff1660e060020a028152600401808381526020018281526020019250505060206040518083038186803b156100005760325a03f4156100005750506040805180516000908155600160a060020a038616815260016020908152838220549281019190915282517f66098d4f000000000000000000000000000000000000000000000000000000008152600481019290925260248201859052915173c2dc70143ab4862bfa16432d8bb469f7fbdd5b4a93506366098d4f92604480840193919291829003018186803b156100005760325a03f415610000575050604080518051600160a060020a0386166000818152600160209081528582209390935586845293519094507fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef9281900390910190a35b5b5b5050565b33600160a060020a038116600090815260016020526040902054610b74908361160d565b600160a060020a03821660009081526001602052604081209190915554610b9b908361160d565b60005560408051600160a060020a03831681526020810184905281517f696de425f79f4a40bc6d2122ca50507f0efbeabbff86a84871b7196ab8ea8df7929181900390910190a15b5050565b60076020526000908152604090205460ff1681565b60035433600160a060020a03908116911614610c1757610000565b60065460ff1615610c2757610000565b600160a060020a038216600081815260076020908152604091829020805460ff191685151590811790915582519384529083015280517f4b0adf6c802794c7dde28a08a4e07131abcff3bf9603cd71f14f90bec7865efa9281900390910190a15b5b5b5050565b6000610c986110e1565b905060038160048111610000571480610cb957506004816004811161000057145b1515610cc457610000565b811515610cd057610000565b600160a060020a033316600090815260016020526040902054610cf3908361160d565b600160a060020a03331660009081526001602052604081209190915554610d1a908361160d565b600055600a54610d2a9083611626565b600a55600954604080517f753e88e5000000000000000000000000000000000000000000000000000000008152600160a060020a033381166004830152602482018690529151919092169163753e88e591604480830192600092919082900301818387803b156100005760325a03f115610000575050600954604080518581529051600160a060020a03928316935033909216917f7e5c344a8141a805725cb476f76c6953b842222b967edd1f78ddb6e8b3f397ac9181900360200190a35b5050565b60035433600160a060020a03908116911614610e0857610000565b81600b9080519060200190828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f10610e5457805160ff1916838001178555610e81565b82800160010185558215610e81579182015b82811115610e81578251825591602001919060010190610e66565b5b50610ea29291505b80821115610e9e5760008155600101610e8a565b5090565b505080600c9080519060200190828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f10610ef057805160ff1916838001178555610f1d565b82800160010185558215610f1d579182015b82811115610f1d578251825591602001919060010190610f02565b5b50610f3e9291505b80821115610e9e5760008155600101610e8a565b5090565b505060408051818152600b8054600260001961010060018416150201909116049282018390527fd131ab1e6f279deea74e13a18477e13e2107deb6dc8ae955648948be5841fb46929091600c9181906020820190606083019086908015610fe65780601f10610fbb57610100808354040283529160200191610fe6565b820191906000526020600020905b815481529060010190602001808311610fc957829003601f168201915b505083810382528454600260001961010060018416150201909116048082526020909101908590801561105a5780601f1061102f5761010080835404028352916020019161105a565b820191906000526020600020905b81548152906001019060200180831161103d57829003601f168201915b505094505050505060405180910390a15b5b5050565b600954600160a060020a031681565b60045433600160a060020a0390811691161461109a57610000565b6006805460ff191660011790556110af61164e565b5b5b565b600854600160a060020a031681565b600160a060020a0381166000908152600160205260409020545b919050565b60006110eb6111f0565b15156110f957506001611128565b600954600160a060020a0316151561111357506002611128565b600a54151561112457506003611128565b5060045b5b5b5b90565b60056020526000908152604090205460ff1681565b600354600160a060020a031681565b600c805460408051602060026001851615610100026000190190941693909304601f8101849004840282018401909252818152929183018282801561084b5780601f106108205761010080835404028352916020019161084b565b820191906000526020600020905b81548152906001019060200180831161082e57829003601f168201915b505050505081565b60045460a060020a900460ff1681565b60045460009060a060020a900460ff16801561120f575061120f611465565b5b90505b90565b600454600090339060a060020a900460ff16151561125557600160a060020a03811660009081526005602052604090205460ff16151561125557610000565b5b6112608484611697565b91505b5b5092915050565b600a5481565b600454600160a060020a031681565b6112886111f0565b151561129357610000565b600160a060020a03811615156112a857610000565b60085433600160a060020a039081169116146112c357610000565b60046112cd6110e1565b600481116100005714156112e057610000565b60098054600160a060020a031916600160a060020a038381169190911791829055604080516000602091820181905282517f61d3d7a6000000000000000000000000000000000000000000000000000000008152925194909316936361d3d7a6936004808501948390030190829087803b156100005760325a03f115610000575050604051511515905061137357610000565b6000805460095460408051602090810185905281517f4b2ba0dd00000000000000000000000000000000000000000000000000000000815291519394600160a060020a0390931693634b2ba0dd936004808501948390030190829087803b156100005760325a03f115610000575050604051519190911490506113f557610000565b60095460408051600160a060020a039092168252517f7845d5aa74cc410e35571258d954f23b82276e160fe8c188fa80566580f279cc9181900360200190a15b50565b600160a060020a038083166000908152600260209081526040808320938516835292905220545b92915050565b60015b90565b60035433600160a060020a0390811691161461148657610000565b600160a060020a038116156109aa5760038054600160a060020a031916600160a060020a0383161790555b5b5b50565b600081565b600160a060020a03811615156114d057610000565b60085433600160a060020a039081169116146114eb57610000565b60088054600160a060020a031916600160a060020a0383161790555b50565b600160a060020a03808416600090815260026020908152604080832033851684528252808320549386168352600190915281205490919061154b9084611626565b600160a060020a03808616600090815260016020526040808220939093559087168152205461157a908461160d565b600160a060020a03861660009081526001602052604090205561159d818461160d565b600160a060020a038087166000818152600260209081526040808320338616845282529182902094909455805187815290519288169391927fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef929181900390910190a3600191505b509392505050565b600061161b8383111561174b565b508082035b92915050565b600082820161164384821080159061163e5750838210155b61174b565b8091505b5092915050565b60045433600160a060020a0390811691161461166957610000565b6004805474ff0000000000000000000000000000000000000000191660a060020a1790555b5b565b60015b90565b600160a060020a0333166000908152600160205260408120546116ba908361160d565b600160a060020a0333811660009081526001602052604080822093909355908516815220546116e99083611626565b600160a060020a038085166000818152600160209081526040918290209490945580518681529051919333909316927fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef92918290030190a35060015b92915050565b8015156109aa57610000565b5b505600a165627a7a72305820e71a58f5654f13867955e60ea07dcaecf405e1d7d54aa5c85321725204faf256002900000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000000e00000000000000000000000000000000000000000000000000012eb4378a1d600000000000000000000000000000000000000000000000000000000000000000800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000003585858000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000035858580000000000000000000000000000000000000000000000000000000000",
  '0x60a0604052600960608190527f546f6b656e20302e310000000000000000000000000000000000000000000000608090815261003e91600091906100d9565b50341561004757fe5b604051610cc6380380610cc6833981016040908152815160208301519183015160608401519193928301929091015b600160a060020a0333166000908152600560209081526040909120859055600485905583516100ab91600191908601906100d9565b5080516100bf9060029060208401906100d9565b506003805460ff191660ff84161790555b50505050610179565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f1061011a57805160ff1916838001178555610147565b82800160010185558215610147579182015b8281111561014757825182559160200191906001019061012c565b5b50610154929150610158565b5090565b61017691905b80821115610154576000815560010161015e565b5090565b90565b610b3e806101886000396000f300606060405236156100c25763ffffffff7c010000000000000000000000000000000000000000000000000000000060003504166306fdde0381146100c4578063095ea7b31461015457806318160ddd1461018757806323b872dd146101a9578063313ce567146101e257806342966c68146102085780635a3b7e421461022f57806370a08231146102bf57806379cc6790146102ed57806395d89b4114610320578063a9059cbb146103b0578063cae9ca51146103d1578063dd62ed3e14610448575bfe5b34156100cc57fe5b6100d461047c565b60408051602080825283518183015283519192839290830191850190808383821561011a575b80518252602083111561011a57601f1990920191602091820191016100fa565b505050905090810190601f1680156101465780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b341561015c57fe5b610173600160a060020a0360043516602435610509565b604080519115158252519081900360200190f35b341561018f57fe5b61019761053a565b60408051918252519081900360200190f35b34156101b157fe5b610173600160a060020a0360043581169060243516604435610540565b604080519115158252519081900360200190f35b34156101ea57fe5b6101f2610667565b6040805160ff9092168252519081900360200190f35b341561021057fe5b610173600435610670565b604080519115158252519081900360200190f35b341561023757fe5b6100d46106fd565b60408051602080825283518183015283519192839290830191850190808383821561011a575b80518252602083111561011a57601f1990920191602091820191016100fa565b505050905090810190601f1680156101465780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b34156102c757fe5b610197600160a060020a036004351661078b565b60408051918252519081900360200190f35b34156102f557fe5b610173600160a060020a036004351660243561079d565b604080519115158252519081900360200190f35b341561032857fe5b6100d461085f565b60408051602080825283518183015283519192839290830191850190808383821561011a575b80518252602083111561011a57601f1990920191602091820191016100fa565b505050905090810190601f1680156101465780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b34156103b857fe5b6103cf600160a060020a03600435166024356108ea565b005b34156103d957fe5b604080516020600460443581810135601f8101849004840285018401909552848452610173948235600160a060020a03169460248035956064949293919092019181908401838280828437509496506109bb95505050505050565b604080519115158252519081900360200190f35b341561045057fe5b610197600160a060020a0360043581169060243516610af5565b60408051918252519081900360200190f35b60018054604080516020600284861615610100026000190190941693909304601f810184900484028201840190925281815292918301828280156105015780601f106104d657610100808354040283529160200191610501565b820191906000526020600020905b8154815290600101906020018083116104e457829003601f168201915b505050505081565b600160a060020a03338116600090815260066020908152604080832093861683529290522081905560015b92915050565b60045481565b6000600160a060020a03831615156105585760006000fd5b600160a060020a0384166000908152600560205260409020548290101561057f5760006000fd5b600160a060020a03831660009081526005602052604090205482810110156105a75760006000fd5b600160a060020a03808516600090815260066020908152604080832033909416835292905220548211156105db5760006000fd5b600160a060020a03808516600081815260056020908152604080832080548890039055878516808452818420805489019055848452600683528184203390961684529482529182902080548790039055815186815291517fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef9281900390910190a35060015b9392505050565b60035460ff1681565b600160a060020a033316600090815260056020526040812054829010156106975760006000fd5b600160a060020a03331660008181526005602090815260409182902080548690039055600480548690039055815185815291517fcc16f5dbb4873280815c1ee09dbd06736cffcc184412cf7a71a0fdb75d397ca59281900390910190a25060015b919050565b6000805460408051602060026001851615610100026000190190941693909304601f810184900484028201840190925281815292918301828280156105015780601f106104d657610100808354040283529160200191610501565b820191906000526020600020905b8154815290600101906020018083116104e457829003601f168201915b505050505081565b60056020526000908152604090205481565b600160a060020a038216600090815260056020526040812054829010156107c45760006000fd5b600160a060020a03808416600090815260066020908152604080832033909416835292905220548211156107f85760006000fd5b600160a060020a03831660008181526005602090815260409182902080548690039055600480548690039055815185815291517fcc16f5dbb4873280815c1ee09dbd06736cffcc184412cf7a71a0fdb75d397ca59281900390910190a25060015b92915050565b6002805460408051602060018416156101000260001901909316849004601f810184900484028201840190925281815292918301828280156105015780601f106104d657610100808354040283529160200191610501565b820191906000526020600020905b8154815290600101906020018083116104e457829003601f168201915b505050505081565b600160a060020a03821615156109005760006000fd5b600160a060020a033316600090815260056020526040902054819010156109275760006000fd5b600160a060020a038216600090815260056020526040902054818101101561094f5760006000fd5b600160a060020a03338116600081815260056020908152604080832080548790039055938616808352918490208054860190558351858152935191937fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef929081900390910190a35b5050565b6000836109c88185610509565b15610aec5780600160a060020a0316638f4ffcb1338630876040518563ffffffff167c01000000000000000000000000000000000000000000000000000000000281526004018085600160a060020a0316600160a060020a0316815260200184815260200183600160a060020a0316600160a060020a0316815260200180602001828103825283818151815260200191508051906020019080838360008314610a8c575b805182526020831115610a8c57601f199092019160209182019101610a6c565b505050905090810190601f168015610ab85780820380516001836020036101000a031916815260200191505b5095505050505050600060405180830381600087803b1515610ad657fe5b6102c65a03f11515610ae457fe5b505050600191505b5b509392505050565b6006602090815260009283526040808420909152908252902054815600a165627a7a7230582027e9221fe9d37341fcc35b7a8eb7bb1f06f6e03f17fd8e2339a7f87904808ac10029000000000000000000000000000000000000000000000000058d15e1762800000000000000000000000000000000000000000000000000000000000000000080000000000000000000000000000000000000000000000000000000000000000800000000000000000000000000000000000000000000000000000000000000c0000000000000000000000000000000000000000000000000000000000000000749434f424f4f4d00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000349434f0000000000000000000000000000000000000000000000000000000000',
  '0x606060408190526002805460ff19166001179055608080610f99833960e06040529051905160a05160c051600160a060020a03841615156100e857610002565b83604051610542806101158339018082600160a060020a03168152602001915050604051809103906000f0801561000257600480546c01000000000000000000000000928302839004600160a060020a03199182161790915560038054868402849004921691909117905560028054868302929092046101000261010060a860020a03199092169190911790556000829055600181905550505050610942806106576000396000f35b600160a060020a03831615156100fd57610002565b43821161010957610002565b81811161003f5761000256606060408190526000600355602080610542833950608060405251600180546c0100000000000000000000000033810204600160a060020a031990911617905562ed4e004201600255600160a060020a0381166000908152602081905260408120614e2090556109c47f2f5182ca3c71fba9448b5797d92da7b954eeaeb24b669d38048e225561035564556102da7f45df8c30765988748331aa685f931bde8d58d486ac2309077e90fd6baaf79e038190557f7ea8a6eced6159c474e51a36ed2fdbeefcbc828cf6c05d46fdd1fad880f548ea8190557fd80aeb97d8ade363914f049101e13bc4c79be147033a8a1fa0e91f954320cfd18190557fd1a1c717e5b5609c72c4991362e166a35ee5521d47496bc9108fc3a6602538008190557fc61bf6c63255306aa3f1daf108b6b962c862b30a9ef9b3111a55cf9a1be9a8d6556102767fe4359dc5a3244eba9cfcf67269b2f0a0a57c214e4cb82f9b6912def299f047528190557fd933b2425e5345f54b48182cee8f889a1054dce093c93ee4a944524ad0af59c48190557ffbefcf091d9562d672e0fdc71891d2d3803db16d6743ea8a23fcfef88796a09d8190557fe5b2b0da35bec8da153886157cd88779fbd6472c27b66913d5c69e1445aa806f556101367f085c12f836c258aa880654d07c75055519a771d8386caee004632ed5afcbe9d155608a7f3a722b2d2783e2bd2f725b60f80f56ff256a418ebecca715894d57d5feb689715560877fd1c40006b594ba5b504908c67a40189432057d2394f1773ab7774bd3123bca545560647f0eef056c83f1149e261cf3b61d9e20a9e0c5f64ada6748701e1b27d1de158ce38190557f7070adbdb8f2d4019cc852cc26afe358144bc7fbe990d77bc637f5c7e722c41c8190557f581488c6d9a945dc9b0fd448f74525266c0b506653a1d4c8fbb199bb557cf58e8190557f943f08fbd86d9c14937cccb5045806305960ee93608df8764c86f5364a3102335560467fb6bd8179f2fe2847ab9692c0c2e093d2f25ee7f1808ba3b0e7d52c98fa7d9f558190557fb63e17ea19e0eaf429d63bb96f3600c9aca74fbce87db89dc7bc4577fc7683b78190557f502063b8af6f4e9d3f416f8166f86c7f3c6c0abe8692397a61182ba8dca7c1208190557fe7e3a4e3c5fd8cb5848bc5c4fe5e5566299670c2bf4adffd95984be3e33a61df55602a7f664cea02e91f34521fafc42bfb9f9365ac4cd7ca869351e22c8d1ed75d54157f5573d0af9f75ea618163944585bf56aca98204d0ab66905260197f0d038efd35c79f794bca2eb26019390c0b2b1975cb3389c23e540ef5ea1670275550610177806103cb6000396000f3606060405260e060020a6000350463a69df4b5811461001e575b610002565b346100025761003c6000600060026000505442101561004257610002565b005b5050565b60035415156100c357600160009054906101000a9004600160a060020a0316600160a060020a03166370a08231306000604051602001526040518260e060020a0281526004018082600160a060020a03168152602001915050602060405180830381600087803b156100025760325a03f11561000257505060405151600355505b600160a060020a03331660009081526020819052604081208054919055600354909250617530908302049050600160009054906101000a9004600160a060020a0316600160a060020a031663a9059cbb33836000604051602001526040518360e060020a0281526004018083600160a060020a0316815260200182815260200192505050602060405180830381600087803b156100025760325a03f115610002575050604051511515905061003e5761000256606060405236156101065760e060020a600035046306fdde03811461010b578063162229501461014a57806318160ddd1461016757806326316e5814610182578063313ce567146101a8578063454b0608146101b55780634bb278f3146101d0578063590e1ae3146101ee578063676d2e621461020c5780636f7920fd1461022357806370a082311461023b57806375e2ff65146102605780638328dbcd1461027b57806391b43d131461029257806395a0f5eb146102a057806395d89b41146102ae578063a9059cbb146102ed578063c039daf614610310578063cb4c86b714610327578063cf8d652c14610338578063d648a64714610346578063efc81a8c14610354575b610002565b346100025761036b60408051808201909152601381527f476f6c656d204e6574776f726b20546f6b656e00000000000000000000000000602082015281565b34610002576103d9600254600160a060020a036101009091041681565b34610002576005545b60408051918252519081900360200190f35b34610002576103f560043560035433600160a060020a0390811691161461042157610002565b34610002576103f7601281565b34610002576103f560043560025460ff161561046b57610002565b34610002576103f5600254600090819060ff16151561059457610002565b34610002576103f5600254600090819060ff16151561069557610002565b34610002576103d9600354600160a060020a031681565b34610002576101706b02a649c112686927b400000081565b3461000257600160a060020a0360043516600090815260066020526040902054610170565b34610002576103f560043560025460ff161561077e57610002565b34610002576103d9600754600160a060020a031681565b346100025761017060015481565b346100025761017060085481565b346100025761036b60408051808201909152600381527f474e540000000000000000000000000000000000000000000000000000000000602082015281565b346100025761040d600435602435600254600090819060ff16156107f057610002565b34610002576101706a7c13bc4b2c133c5600000081565b346100025761040d60025460ff1681565b34610002576101706103e881565b346100025761017060005481565b6103f560025460009060ff16151561089057610002565b60405180806020018281038252838181518152602001915080519060200190808383829060006004602084601f0104600302600f01f150905090810190601f1680156103cb5780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b60408051600160a060020a039092168252519081900360200190f35b005b6040805160ff9092168252519081900360200190f35b604080519115158252519081900360200190f35b600160a060020a038116151561043657610002565b600380546c010000000000000000000000008084020473ffffffffffffffffffffffffffffffffffffffff1990911617905550565b600754600160a060020a0316151561048257610002565b80151561048e57610002565b600160a060020a0333166000908152600660205260409020548111156104b357610002565b600160a060020a0333811660008181526006602052604080822080548690039055600580548690039055600880548601905560075481517f7a3130e30000000000000000000000000000000000000000000000000000000081526004810194909452602484018690529051931692637a3130e392604480820193929182900301818387803b156100025760325a03f115610002575050600754604080518481529051600160a060020a03928316935033909216917f18df02dcc52b9c494f391df09661519c0069bd8540141946280399408205ca1a9181900360200190a350565b600154431115806105b257506005546a7c13bc4b2c133c5600000090105b80156105cc57506005546b02a649c112686927b400000090105b156105d657610002565b50506002805460ff1916905560058054605260128083029190910491820190925560048054600160a060020a03908116600090815260066020908152604080832080548701905593548451868152945193169391927fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef9281900390910190a36040516002546101009004600160a060020a0390811691309091163180156108fc02916000818181858888f19350505050151561069157610002565b5050565b60015443116106a357610002565b6005546a7c13bc4b2c133c5600000090106106bd57610002565b600160a060020a03331660009081526006602052604090205491508115156106e457610002565b600160a060020a0333166000908152600660205260408120556005805483900390556103e88204905033600160a060020a03167fbb28353e4598c3b9199101a66e0989549b659a59a54d2c27fbb183f1932c8e6d826040518082815260200191505060405180910390a2604051600160a060020a0333169082156108fc029083906000818181858888f19350505050151561069157610002565b600754600160a060020a03161561079457610002565b60035433600160a060020a039081169116146107af57610002565b600780546c010000000000000000000000008084020473ffffffffffffffffffffffffffffffffffffffff1990911617905550565b600091505b5092915050565b50600160a060020a03331660009081526006602052604090205482811080159061081a5750600083115b156107e457600160a060020a0333811660008181526006602090815260408083209588900395869055938816808352918490208054880190558351878152935191937fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef929081900390910190a3600191506107e9565b60005443101561089f57610002565b6001544311156108ae57610002565b3415156108ba57610002565b6005546103e8906b02a649c112686927b400000003043411156108dc57610002565b5060058054346103e802908101909155600160a060020a0333166000818152600660209081526040808320805486019055805185815290517fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef929181900390910190a35056',
  '0x0x606060405236156100b8576000357c0100000000000000000000000000000000000000000000000000000000900463ffffffff16806306fdde03146100bd578063095ea7b31461014c57806318160ddd146101a657806323b872dd146101cf578063313ce5671461024857806342966c681461027757806370a08231146102b257806379cc6790146102ff57806395d89b4114610359578063a9059cbb146103e8578063cae9ca511461042a578063dd62ed3e146104c7575b600080fd5b34156100c857600080fd5b6100d0610533565b6040518080602001828103825283818151815260200191508051906020019080838360005b838110156101115780820151818401525b6020810190506100f5565b50505050905090810190601f16801561013e5780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b341561015757600080fd5b61018c600480803573ffffffffffffffffffffffffffffffffffffffff169060200190919080359060200190919050506105d1565b604051808215151515815260200191505060405180910390f35b34156101b157600080fd5b6101b961065f565b6040518082815260200191505060405180910390f35b34156101da57600080fd5b61022e600480803573ffffffffffffffffffffffffffffffffffffffff1690602001909190803573ffffffffffffffffffffffffffffffffffffffff16906020019091908035906020019091905050610665565b604051808215151515815260200191505060405180910390f35b341561025357600080fd5b61025b610792565b604051808260ff1660ff16815260200191505060405180910390f35b341561028257600080fd5b61029860048080359060200190919050506107a5565b604051808215151515815260200191505060405180910390f35b34156102bd57600080fd5b6102e9600480803573ffffffffffffffffffffffffffffffffffffffff169060200190919050506108a9565b6040518082815260200191505060405180910390f35b341561030a57600080fd5b61033f600480803573ffffffffffffffffffffffffffffffffffffffff169060200190919080359060200190919050506108c1565b604051808215151515815260200191505060405180910390f35b341561036457600080fd5b61036c610adc565b6040518080602001828103825283818151815260200191508051906020019080838360005b838110156103ad5780820151818401525b602081019050610391565b50505050905090810190601f1680156103da5780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b34156103f357600080fd5b610428600480803573ffffffffffffffffffffffffffffffffffffffff16906020019091908035906020019091905050610b7a565b005b341561043557600080fd5b6104ad600480803573ffffffffffffffffffffffffffffffffffffffff1690602001909190803590602001909190803590602001908201803590602001908080601f01602080910402602001604051908101604052809392919081815260200183838082843782019150505050505091905050610b8a565b604051808215151515815260200191505060405180910390f35b34156104d257600080fd5b61051d600480803573ffffffffffffffffffffffffffffffffffffffff1690602001909190803573ffffffffffffffffffffffffffffffffffffffff16906020019091905050610d09565b6040518082815260200191505060405180910390f35b60008054600181600116156101000203166002900480601f0160208091040260200160405190810160405280929190818152602001828054600181600116156101000203166002900480156105c95780601f1061059e576101008083540402835291602001916105c9565b820191906000526020600020905b8154815290600101906020018083116105ac57829003601f168201915b505050505081565b600081600560003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002081905550600190505b92915050565b60035481565b6000600560008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002054821015156106f157600080fd5b81600560008673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008282540392505081905550610786848484610d2e565b600190505b9392505050565b600260009054906101000a900460ff1681565b600081600460003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020541115156107f457600080fd5b81600460003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008282540392505081905550816003600082825403925050819055503373ffffffffffffffffffffffffffffffffffffffff167fcc16f5dbb4873280815c1ee09dbd06736cffcc184412cf7a71a0fdb75d397ca5836040518082815260200191505060405180910390a2600190505b919050565b60046020528060005260406000206000915090505481565b600081600460008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020541015151561091157600080fd5b600560008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002054821115151561099c57600080fd5b81600460008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000206000828254039250508190555081600560008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008282540392505081905550816003600082825403925050819055508273ffffffffffffffffffffffffffffffffffffffff167fcc16f5dbb4873280815c1ee09dbd06736cffcc184412cf7a71a0fdb75d397ca5836040518082815260200191505060405180910390a2600190505b92915050565b60018054600181600116156101000203166002900480601f016020809104026020016040519081016040528092919081815260200182805460018160011615610100020316600290048015610b725780601f10610b4757610100808354040283529160200191610b72565b820191906000526020600020905b815481529060010190602001808311610b5557829003601f168201915b505050505081565b610b85338383610d2e565b5b5050565b600080849050610b9a85856105d1565b15610d00578073ffffffffffffffffffffffffffffffffffffffff16638f4ffcb1338630876040518563ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401808573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020018481526020018373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200180602001828103825283818151815260200191508051906020019080838360005b83811015610c955780820151818401525b602081019050610c79565b50505050905090810190601f168015610cc25780820380516001836020036101000a031916815260200191505b5095505050505050600060405180830381600087803b1515610ce357600080fd5b6102c65a03f11515610cf457600080fd5b50505060019150610d01565b5b509392505050565b6005602052816000526040600020602052806000526040600020600091509150505481565b73a41987a42848bea942b23d70bbfe83b3860a3c988273ffffffffffffffffffffffffffffffffffffffff1614151515610d6757600080fd5b80600460008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002054111515610db457600080fd5b600460008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000205481600460008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000205401111515610e4257600080fd5b80600460008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000206000828254039250508190555080600460008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600082825401925050819055508173ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef836040518082815260200191505060405180910390a35b5050505600a165627a7a72305820b10e3f6c72857a54faa41f19150be1ba3de5b116530be60e08d41cbf36706dec0029',
  '0x60a060405260046060527f48302e31000000000000000000000000000000000000000000000000000000006080526006805460008290527f48302e310000000000000000000000000000000000000000000000000000000882556100b5907ff652222313e28459528d920b65115c16c04f3efc82aaedc97be59f3f377c0d3f602060026001841615610100026000190190931692909204601f01919091048101905b8082111561017957600081556001016100a1565b505060405161094b38038061094b83398101604052808051906020019091908051820191906020018051906020019091908051820191906020015050836000600050600033600160a060020a0316815260200190815260200160002060005081905550836002600050819055508260036000509080519060200190828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f1061017d57805160ff19168380011785555b506101ad9291506100a1565b5090565b8280016001018555821561016d579182015b8281111561016d57825182600050559160200191906001019061018f565b50506004805460ff19168317905560058054825160008390527f036b6384b5eca791c62761152d0c79bb0604c104a5fb6f4eb0703f3154bb3db0602060026001851615610100026000190190941693909304601f90810184900482019386019083901061022d57805160ff19168380011785555b5061025d9291506100a1565b82800160010185558215610221579182015b8281111561022157825182600050559160200191906001019061023f565b5050505050506106da806102716000396000f36060604052361561008d5760e060020a600035046306fdde038114610095578063095ea7b3146100f357806318160ddd1461016857806323b872dd14610171578063313ce5671461025c57806354fd4d501461026857806370a08231146102c657806395d89b41146102f4578063a9059cbb14610352578063cae9ca51146103f7578063dd62ed3e146105be575b6105f2610002565b6040805160038054602060026001831615610100026000190190921691909104601f81018290048202840182019094528383526105f493908301828280156106b75780601f1061068c576101008083540402835291602001916106b7565b61066260043560243533600160a060020a03908116600081815260016020908152604080832094871680845294825280832086905580518681529051929493927f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b925929181900390910190a35060015b92915050565b6102e260025481565b610662600435602435604435600160a060020a0383166000908152602081905260408120548290108015906101c4575060016020908152604080832033600160a060020a03168452909152812054829010155b80156101d05750600082115b156106bf57600160a060020a0383811660008181526020818152604080832080548801905588851680845281842080548990039055600183528184203390961684529482529182902080548790039055815186815291519293927fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef9281900390910190a35060016106c3565b61067660045460ff1681565b6040805160068054602060026001831615610100026000190190921691909104601f81018290048202840182019094528383526105f493908301828280156106b75780601f1061068c576101008083540402835291602001916106b7565b600160a060020a03600435166000908152602081905260409020545b60408051918252519081900360200190f35b6105f46005805460408051602060026001851615610100026000190190941693909304601f810184900484028201840190925281815292918301828280156106b75780601f1061068c576101008083540402835291602001916106b7565b61066260043560243533600160a060020a03166000908152602081905260408120548290108015906103845750600082115b156106ca5733600160a060020a0390811660008181526020818152604080832080548890039055938716808352918490208054870190558351868152935191937fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef929081900390910190a3506001610162565b604080516020604435600481810135601f810184900484028501840190955284845261066294813594602480359593946064949293910191819084018382808284375094965050505050505033600160a060020a03908116600081815260016020908152604080832094881680845294825280832087905580518781529051929493927f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b925929181900390910190a383600160a060020a031660405180807f72656365697665417070726f76616c28616464726573732c75696e743235362c81526020017f616464726573732c627974657329000000000000000000000000000000000000815260200150602e019050604051809103902060e060020a9004338530866040518560e060020a0281526004018085600160a060020a0316815260200184815260200183600160a060020a031681526020018280519060200190808383829060006004602084601f0104600f02600301f150905090810190601f1680156105965780820380516001836020036101000a031916815260200191505b509450505050506000604051808303816000876161da5a03f19250505015156106d257610002565b6102e2600435602435600160a060020a03828116600090815260016020908152604080832093851683529290522054610162565b005b60405180806020018281038252838181518152602001915080519060200190808383829060006004602084601f0104600f02600301f150905090810190601f1680156106545780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b604080519115158252519081900360200190f35b6040805160ff9092168252519081900360200190f35b820191906000526020600020905b81548152906001019060200180831161069a57829003601f168201915b505050505081565b5060005b9392505050565b506000610162565b5060016106c356'
]

TEST_TOKEN_TXS = [
  {'from': '0x6b25d0670a34c1c7b867cd9c6ad405aa1759bda0', 'to': '0x5ca9a71b1d01849c0a95490cc00559717fcf0d1d', 'decoded_input': {'name': 'transfer', 'params': [{'type': 'address', 'value': '0xa60c4c379246a7f1438bd76a92034b6c82a183a5'}, {'type': 'uint256', 'value': '2266000000000000000000'}]}, 'blockNumber': 5635149},
  {'from': '0x58d46475da68984bacf1f2843b85e0fdbcbc6cef', 'to': '0x5ca9a71b1d01849c0a95490cc00559717fcf0d1d', 'decoded_input': {'name': 'approve', 'params': [{'type': 'address', 'value': '0x4e6b129bbb683952ed1ec935c778d74a77b352ce'}, {'type': 'uint256', 'value': '356245680000000000000'}]}, 'blockNumber': 5635141},
  {'from': '0xc917e19946d64aa31d1aeacb516bae2579995aa9', 'to': '0x5ca9a71b1d01849c0a95490cc00559717fcf0d1d', 'decoded_input': {'name': 'transferFrom', 'params': [{'type': 'address', 'value': '0xc917e19946d64aa31d1aeacb516bae2579995aa9'}, {'type': 'address', 'value': '0x4e6b129bbb683952ed1ec935c778d74a77b352ce'}, {'type': 'uint256', 'value': '356245680000000000000'}]}, 'blockNumber': 5635142},
  {'from': '0x892ce7dbc4a0efbbd5933820e53d2c945ef9f722', 'to': '0x51ada638582e51c931147c9abd2a6d63bc02e337', 'decoded_input': {'name': 'transfer', 'params': [{'type': 'address', 'value': '0x3f5ce5fbfe3e9af3971dd833d26ba9b5c936f0be'}, {'type': 'uint256', 'value': '2294245680000000000000'}]}, 'blockNumber': 5632141},
  {'from': '0x930aa9a843266bdb02847168d571e7913907dd84', 'to': '0xa74476443119a942de498590fe1f2454d7d4ac0d', 'decoded_input': {'name': 'transfer', 'params': [{'type': 'address', 'value': '0xc18118a2976a9e362a0f8d15ca10761593242a85'}, {'type': 'uint256', 'value': '2352000000000000000000'}]}, 'blockNumber': 5235141}
]

TEST_BLOCK = {
  "difficulty": "0xb49b6e4f02608",
  "extraData": "0x737061726b706f6f6c2d636e2d6e6f64652d39",
  "gasLimit": "0x79f39e",
  "gasUsed": "0x79dd4c",
  "hash": "0xfe5ea4c58e05a534570f9bd685a9e6e7e0e505f971757e185417845efc2434c2",
  "logsBloom": "0x000219850100a0e020208420010004434012900122000000800048410300420091d100000001004041811060231010000040a000301000040483010110282810008410010c10801c00000009040022a400000014003904012400000880241524000006520a014000100a000000400a200a8008420c104000a11600b0100094101040470442a000080084400a10200090006249001050000920001428800000808a040000200400004c00000000400000000000580a05000904400200800901149822040384704120400280008000100403e50040300e0c0204000241402822c00014036004000182001220880040101540c00026104000004a001200d0000082",
  "miner": "0x5a0b54d5dc17e0aadc383d2db43b0a0d3e029c4c",
  "mixHash": "0xec267c36380cafe9ee9b6d87a8435d2b836c4143f1ad5039d7bd42bdf3d6f509",
  "nonce": "0x405fb3c402b65764",
  "number": "0x567e6d",
  "parentHash": "0x0614307e4c441119386ac91a1caca04687607fd352f350acee404157bc9757aa",
  "receiptsRoot": "0xe11b2005cdf839bc64bcc4ff310fc4a1ba49ff45356ddd131b797ae87483a409",
  "sha3Uncles": "0x1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347",
  "size": "0x719d",
  "stateRoot": "0xfaf53ba964b5288bcf961a6a48be58f9d7e40ee6c317446d8ab45a94b38ebfb0",
  "timestamp": "0x5b06a409",
  "totalDifficulty": "0xed153ab1b63888923c",
  "transactions": [
    {
      "blockHash": "0xfe5ea4c58e05a534570f9bd685a9e6e7e0e505f971757e185417845efc2434c2",
      "blockNumber": "0x567e6d",
      "from": "0x2ab5aa1d5212d2c92c6a8734222c1eee11ed8547",
      "gas": "0x8fd2",
      "gasPrice": "0x98bca5a00",
      "hash": "0x42619022e399e6dd573dec33cff97f4cb0618922620c5db1c5991448868a014d",
      "input": "0xa9059cbb0000000000000000000000000631787216194b4f13e34db7702793c331c5e66900000000000000000000000000000000000000000000000000000000c6b30120",
      "nonce": "0x1f",
      "to": "0xc50948bac01116f246259070ea6084c04649efdf",
      "transactionIndex": "0x0",
      "value": "0x0",
      "v": "0x25",
      "r": "0xfa1f8d5d5831a6f81225cdd0ee4c98e0288556ec11c737dc73c2aedd04b96131",
      "s": "0x7ff03151e788bdeabbc6ec02c78b72cbb4b6b3c0e2fa8a3819bf56d0717c87b9",
      "decoded_input": {
        'name': 'transfer', 
        'params': [
          {
            'type': 'address', 
            'value': '0xa60c4c379246a7f1438bd76a92034b6c82a183a5'
          }, 
          {
            'type': 'uint256', 
            'value': '2266000000000000000000'
          }
        ]
      }
    },
    {
      "blockHash": "0xfe5ea4c58e05a534570f9bd685a9e6e7e0e505f971757e185417845efc2434c2",
      "blockNumber": "0x567e6d",
      "from": "0x2711301985fd072c3c94b45781d4897f44c562d5",
      "gas": "0x15f90",
      "gasPrice": "0x826299e00",
      "hash": "0xfa8b523e944961883e2cdfee3413dab7c299f861d7ddd6fa11004a0e7a3ea133",
      "input": "0xa9059cbb0000000000000000000000007b1becff5ffe89f9c950f92f07c65bb29613f06700000000000000000000000000000000000000000000000f732b66015a53ffff",
      "nonce": "0x4290",
      "to": "0x7537aef853f63f114e6152956faf26488c08cc84",
      "transactionIndex": "0x1",
      "value": "0x0",
      "v": "0x26",
      "r": "0xe41c53795fe010946a968ddbf5724b201250efbd416b0880d907025de4048ca5",
      "s": "0xad756bb5e4592a2156fbf661dc15667b32a4a9ad26062e9795fd02fc5b1fb55",
      "decoded_input": {
        'name': 'transferFrom', 
        'params': [
          {
            'type': 'address', 
            'value': '0xc917e19946d64aa31d1aeacb516bae2579995aa9'
          }, 
          {
            'type': 'address', 
            'value': '0x4e6b129bbb683952ed1ec935c778d74a77b352ce'
          }, 
          {
            'type': 'uint256', 
            'value': '356245680000000000000'
          }
        ]
      }
    },
    {
      "blockHash": "0xfe5ea4c58e05a534570f9bd685a9e6e7e0e505f971757e185417845efc2434c2",
      "blockNumber": "0x567e6d",
      "from": "0x14356ba2091d320b5e7e7880e78c4f5673acc5e3",
      "gas": "0x1d4c0",
      "gasPrice": "0x312c80400",
      "hash": "0x288851a90e18d4c67bc2e5adfb58e5443b9126ab0f6f08dc5c5f8e1eb4ebd37d",
      "input": "0xa9059cbb000000000000000000000000fe5854255eb1eb921525fa856a3947ed2412a1d700000000000000000000000000000000000000000000098774738bc822200000",
      "nonce": "0x5",
      "to": "0x5ca9a71b1d01849c0a95490cc00559717fcf0d1d",
      "transactionIndex": "0x2c",
      "value": "0x0",
      "v": "0x26",
      "r": "0x424a69f113ab7efebcc3838e6313b6512ea14013cb6a7622e4a61fc180770fe6",
      "s": "0x4e85edf81800f908dfdadbab82362cbc48213f15853a855131ef82bdd92f782a",
      "decoded_input": {
        'name': 'transferFrom', 
        'params': [
          {
            'type': 'address', 
            'value': '0xc917e19946d64aa31d1aeacb516bae2579995aa9'
          }, 
          {
            'type': 'address', 
            'value': '0x4e6b129bbb683952ed1ec935c778d74a77b352ce'
          }, 
          {
            'type': 'uint256', 
            'value': '356245680000000000000'
          }
        ]
      }
    },
    {
      "blockHash": "0xfe5ea4c58e05a534570f9bd685a9e6e7e0e505f971757e185417845efc2434c2",
      "blockNumber": "0x567e6d",
      "from": "0x4416537e37cd59c217f97c6a816a6a4eee21051a",
      "gas": "0x1d4c0",
      "gasPrice": "0x312c80400",
      "hash": "0x9142381d6f304010d2442593da79eab297b224a6554cc2ebf9b4c2056c9d00e6",
      "input": "0xa9059cbb000000000000000000000000fe5854255eb1eb921525fa856a3947ed2412a1d700000000000000000000000000000000000000000000001d52ce324cf5124000",
      "nonce": "0x16",
      "to": "0x5ca9a71b1d01849c0a95490cc00559717fcf0d1d",
      "transactionIndex": "0x2d",
      "value": "0x0",
      "v": "0x26",
      "r": "0xc5af0af7fa306fb718fa684c3d77c396ff6d08aea2468e6e880a54b6fbb5476e",
      "s": "0x6e0e7f06768bb7be5691aafc96a963f25dadd4e1237b5091486e3d60bcac3fe3",
      "decoded_input": {
        'name': 'transferFrom', 
        'params': [
          {
            'type': 'address', 
            'value': '0xc917e19946d64aa31d1aeacb516bae2579995aa9'
          }, 
          {
            'type': 'address', 
            'value': '0x4e6b129bbb683952ed1ec935c778d74a77b352ce'
          }, 
          {
            'type': 'uint256', 
            'value': '356245680000000000000'
          }
        ]
      }
    },
    {
      "blockHash": "0xfe5ea4c58e05a534570f9bd685a9e6e7e0e505f971757e185417845efc2434c2",
      "blockNumber": "0x567e6d",
      "from": "0x61e463617ef75e528f90f92fcefb927ef735ae42",
      "gas": "0xea60",
      "gasPrice": "0x2aa19c470",
      "hash": "0xd68c3337e37f5bdd4b5d15378e660c9f18ea81a28c742f1a16ea8f49d784f9fc",
      "input": "0xa9059cbb000000000000000000000000698e25fc99b355fce28160d6c641e7c9c777ffce0000000000000000000000000000000000000000000000000000010c6531d540",
      "nonce": "0x1",
      "to": "0x4ccc3759eb48faf1c6cfadad2619e7038db6b212",
      "transactionIndex": "0x40",
      "value": "0x0",
      "v": "0x26",
      "r": "0xa231507e58befaf61112ecd768d50ae4b4ae616beb26720767b5687484171df4",
      "s": "0x52f169ec07ef4b1f4632e15cb2a9c36d8ddaab8510c7d417105e21808ba63941",
      "decoded_input": {
        'name': 'transferFrom', 
        'params': [
          {
            'type': 'address', 
            'value': '0xc917e19946d64aa31d1aeacb516bae2579995aa9'
          }, 
          {
            'type': 'address', 
            'value': '0x4e6b129bbb683952ed1ec935c778d74a77b352ce'
          }, 
          {
            'type': 'uint256', 
            'value': '356245680000000000000'
          }
        ]
      }
    }
  ],
  "transactionsRoot": "0x5a2326af8886123c47abcccd5aa2b05c8842de2b72674ae040decf108f496fa8",
  "uncles": []
}
    